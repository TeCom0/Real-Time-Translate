import{r as N,g as W,u as q,i as z,j as i,a as u,C as D,B as y,T as g,S as R,M as E,I as $,P as b,b as U,A as F,R as G}from"./vendor-9e916cc2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}})();var v={},L=N;v.createRoot=L.createRoot,v.hydrateRoot=L.hydrateRoot;var x={},w={};const K=W(q);var C;function V(){return C||(C=1,function(l){"use client";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=K}(w)),w}var H=z;Object.defineProperty(x,"__esModule",{value:!0});var _=x.default=void 0,J=H(V()),Q=i;_=x.default=(0,J.default)((0,Q.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic");class X{async translateText(n,a,c=""){try{const e=await(await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(n)}&langpair=${c}|${a}`)).json();if(e.responseStatus===200)return e.responseData.translatedText;throw new Error(e.responseDetails||"Translation failed")}catch(t){throw console.error("Translation error:",t),new Error("Failed to translate text")}}async detectLanguage(n){return"en"}}const Y=new X;class Z{constructor(){const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)throw new Error("Speech recognition is not supported in this browser");try{if(this.recognition=new n,this.synthesis=window.speechSynthesis,!this.synthesis)throw new Error("Speech synthesis is not supported in this browser");this.setupRecognition()}catch(a){throw console.error("Failed to initialize speech services:",a),a}}setupRecognition(){this.recognition.continuous=!0,this.recognition.interimResults=!0}startListening(n,a,c){if(!this.recognition)throw new Error("Speech recognition is not initialized");this.recognition.lang=n,this.recognition.onresult=t=>{const e=t.results[t.results.length-1];e.isFinal&&a(e[0].transcript)},this.recognition.onerror=c,this.recognition.start()}stopListening(){this.recognition&&this.recognition.stop()}speak(n,a){if(!this.synthesis)throw new Error("Speech synthesis is not initialized");return new Promise((c,t)=>{const e=new SpeechSynthesisUtterance(n);e.lang=a,e.onend=c,e.onerror=t,this.synthesis.speak(e)})}cancelSpeaking(){this.synthesis&&this.synthesis.cancel()}}const m=new Z,P=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese"}];function ee(){const[l,n]=u.useState("en"),[a,c]=u.useState("es"),[t,e]=u.useState(!1),[s,p]=u.useState(""),[f,d]=u.useState(""),[h,r]=u.useState(""),[I,T]=u.useState(!1),[j,O]=u.useState(!1);u.useEffect(()=>{try{(window.SpeechRecognition||window.webkitSpeechRecognition)&&window.speechSynthesis?O(!0):r("Speech recognition is not supported in your browser. Please try using Chrome, Edge, or Safari.")}catch(o){console.error("Speech service initialization error:",o),r("Failed to initialize speech services. Please try using a different browser.")}},[]);const B=u.useCallback(async o=>{try{p(o),T(!0);const S=await Y.translateText(o,a,l);d(S),await m.speak(S,a)}catch(S){console.error("Translation error:",S),r("Translation failed. Please try again.")}finally{T(!1)}},[l,a]),M=u.useCallback(o=>{console.error("Speech recognition error:",o),r("Speech recognition error. Please try again."),e(!1)},[]),A=()=>{if(!j){r("Speech recognition is not supported in your browser.");return}if(t)m.stopListening(),e(!1);else try{m.startListening(l,B,M),e(!0)}catch(o){console.error("Microphone access error:",o),r("Could not access microphone. Please check permissions.")}};return u.useEffect(()=>()=>{t&&(m.stopListening(),m.cancelSpeaking())},[t]),i.jsx(D,{maxWidth:"sm",children:i.jsxs(y,{sx:{my:4,display:"flex",flexDirection:"column",gap:3},children:[i.jsx(g,{variant:"h4",component:"h1",align:"center",gutterBottom:!0,children:"Real-Time Voice Translator"}),i.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",gap:2},children:[i.jsx(R,{value:l,onChange:o=>n(o.target.value),fullWidth:!0,children:P.map(o=>i.jsx(E,{value:o.code,children:o.name},o.code))}),i.jsx(R,{value:a,onChange:o=>c(o.target.value),fullWidth:!0,children:P.map(o=>i.jsx(E,{value:o.code,children:o.name},o.code))})]}),i.jsx(y,{sx:{display:"flex",justifyContent:"center"},children:i.jsx($,{color:t?"error":"primary",sx:{width:80,height:80},onClick:A,disabled:!j,children:i.jsx(_,{sx:{fontSize:40}})})}),i.jsxs(b,{elevation:3,sx:{p:2},children:[i.jsx(g,{variant:"subtitle1",gutterBottom:!0,children:"Original Text:"}),i.jsx(g,{paragraph:!0,children:s||"Speak something..."})]}),i.jsxs(b,{elevation:3,sx:{p:2},children:[i.jsx(g,{variant:"subtitle1",gutterBottom:!0,children:"Translated Text:"}),i.jsx(g,{paragraph:!0,children:I?"Translating...":f||"Translation will appear here..."})]}),i.jsx(U,{open:!!h,autoHideDuration:6e3,onClose:()=>r(""),children:i.jsx(F,{onClose:()=>r(""),severity:"error",sx:{width:"100%"},children:h})})]})})}const te="modulepreload",re=function(l){return"/Real-Time-Translate/"+l},k={},ne=function(n,a,c){if(!a||a.length===0)return n();const t=document.getElementsByTagName("link");return Promise.all(a.map(e=>{if(e=re(e),e in k)return;k[e]=!0;const s=e.endsWith(".css"),p=s?'[rel="stylesheet"]':"";if(!!c)for(let h=t.length-1;h>=0;h--){const r=t[h];if(r.href===e&&(!s||r.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${p}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":te,s||(d.as="script",d.crossOrigin=""),d.href=e,document.head.appendChild(d),s)return new Promise((h,r)=>{d.addEventListener("load",h),d.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>n()).catch(e=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e})};function se(l={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:c,onRegistered:t,onRegisteredSW:e,onRegisterError:s}=l;let p,f;const d=async(r=!0)=>{await f};async function h(){if("serviceWorker"in navigator){if(p=await ne(()=>import("./workbox-window.prod.es5-5ffdab76.js"),[]).then(({Workbox:r})=>new r("/Real-Time-Translate/sw.js",{scope:"/Real-Time-Translate/",type:"classic"})).catch(r=>{s==null||s(r)}),!p)return;p.addEventListener("activated",r=>{(r.isUpdate||r.isExternal)&&window.location.reload()}),p.addEventListener("installed",r=>{r.isUpdate||c==null||c()}),p.register({immediate:n}).then(r=>{e?e("/Real-Time-Translate/sw.js",r):t==null||t(r)}).catch(r=>{s==null||s(r)})}}return f=h(),d}const ie=se({onNeedRefresh(){confirm("New content available. Click OK to update.")&&ie(!0)},onOfflineReady(){console.log("App ready to work offline")}});v.createRoot(document.getElementById("root")).render(i.jsx(G.StrictMode,{children:i.jsx(ee,{})}));
//# sourceMappingURL=main-e11f7069.js.map
